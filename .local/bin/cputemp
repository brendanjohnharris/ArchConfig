#! /bin/bash

sensors | awk 'BEGIN{IGNORECASE=1} /core|package|tdie|tctl|cpu/ && /째C/{
  if (match($0, /[+-]?[0-9]+(\.[0-9]+)?째C/)) {
    temp = substr($0, RSTART, RLENGTH)
    gsub(/[+째C]/, "", temp)
    if (temp ~ /\./) {
      split(temp, a, ".")
      num = a[1]*10 + a[2]
    } else {
      num = temp*10
    }
    s += num
    r++
  }
} END {
  if (r>0) printf "%d째C\n", int(s/(10*r) + 0.5)
  else print "N/A"
}'